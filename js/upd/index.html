<!DOCTYPE html>
<html>

<head>
    <title>Firebase Web Basics</title>

    <link href="https://fonts.googleapis.com/css?family=Raleway:300,400,500,700" rel="stylesheet">

    <script src="https://use.fontawesome.com/939e9dd52c.js"></script>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>

<body>

    <div class="mainDiv" align="right">
        <h1 align="left">Firebase File Upload</h1>
        <progress id="uploader" value="0" max="100">0%</progress>
        <input type="file" id="fileButton" value="upload" />
    </div>



    <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyAhfpKgLgE553HnqUjVgQeTNrGmYaZMShU",
            authDomain: "web-melon01.firebaseapp.com",
            projectId: "web-melon01",
            storageBucket: "web-melon01.appspot.com",
            messagingSenderId: "437275991929",
            appId: "1:437275991929:web:7af5b4e5b0f0745a8499a8",
            measurementId: "G-RPG07G5C8X"
        };

        firebase.initializeApp(config);
        //-------------------------------------

        var uploader = document.getElementById('uploader');
        var fileButton = document.getElementById('fileButton');
        fileButton.addEventListener('change', function (e) {
            var file = e.target.files[0];
            console.log(file);
            var storageRef = firebase.storage().ref('Melon-img/' + file.name);
            var task = storageRef.put(file);
            task.on('state_changed', function progress(snapshot) {
                var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                uploader.value = percentage;

            }, function error(err) {


            }, function complete() {

            });
        });

    </script>


    </script>

    <div class="progress">
        <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0"
            aria-valuemax="100">25%</div>
    </div>
    <br>
    <br>
    <br>
    <center>
        <div style=max-width:460px;>

            <div class="row">
                <div class=col-xs-12>

                    <p>
                        <span class="pull-left"><strong>3456 Punti Esperienza</strong></span>
                        <span class="pull-right text-muted">20% Completato</span>
                    </p>
                </div>
            </div>
            <div class=row>

                <div class=col-xs-10>
                    <div class="progress progress-striped active">
                        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20"
                            aria-valuemin="0" aria-valuemax="100" style="width: 20%">
                            <span class="sr-only">20% Complmete</span>
                        </div>
                        
                    </div><span class="label label-success pull-right">Liv. 5</span>
                    
                </div>
            </div>
        </div>
    </center>
</body>

</html>